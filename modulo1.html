<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Módulo 1: Valoración y Fisiopatología - Dr. Héctor Castro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f0f4f8; }
        .info-card { background-color: white; border-radius: 0.75rem; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); padding: 1.5rem; margin-bottom: 1.5rem; }
        .infographic { border: 1px solid #e5e7eb; border-radius: 0.75rem; padding: 1.5rem; background-color: #fafafa; }
        .footer-note { text-align: center; padding: 2rem 1rem; font-size: 0.875rem; color: #6b7280; margin-top: 2rem; border-top: 1px solid #e5e7eb; }
        .monro-kellie-container { display: flex; flex-direction: column; align-items: center; padding: 1.5rem; border-radius: 0.75rem; background: #ffffff; box-shadow: 0 0 15px rgba(0,0,0,0.05); }
        .chart-area { display: flex; align-items: flex-end; gap: 1.5rem; width: 100%; justify-content: center; flex-wrap: wrap; }
        .skull-box { width: 100%; max-width: 320px; height: 250px; border: 4px solid #1f2937; border-radius: 45% 45% 0.5rem 0.5rem; display: flex; align-items: flex-end; justify-content: center; overflow: hidden; position: relative; background: repeating-linear-gradient(45deg, #f9fafb, #f9fafb 10px, #f3f4f6 10px, #f3f4f6 20px); }
        .volume-bar { width: 25%; transition: height 0.3s ease-in-out, background-color 0.3s ease; display: flex; justify-content: center; align-items: flex-end; color: white; font-weight: bold; font-size: 0.75rem; padding-bottom: 5px; text-shadow: 1px 1px 2px rgba(0,0,0,0.5); }
        .pic-gauge-container { width: 60px; height: 250px; background-color: #e5e7eb; border: 2px solid #9ca3af; border-radius: 0.5rem; display: flex; flex-direction: column-reverse; overflow: hidden; }
        .pic-gauge-level { width: 100%; height: 0; background-color: #22c55e; transition: height 0.3s ease-in-out, background-color 0.3s ease-in-out; }
        #pic-status-text { font-weight: 700; font-size: 1.125rem; transition: color 0.3s ease; }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-3px); } 75% { transform: translateX(3px); } }
        .critical-shake { animation: shake 0.2s ease-in-out 2; }
        .pressure-volume-chart { position: relative; width: 100%; max-width: 500px; margin-top: 2rem; }
        .pressure-volume-chart svg { width: 100%; overflow: visible; }
        .pv-curve-indicator { transition: all 0.3s ease-in-out; }
        .sim-button { @apply w-full text-left p-3 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed; }
        .sim-button-correct { @apply bg-green-600 !important; }
        .sim-button-incorrect { @apply bg-red-600 !important; }
        .sim-feedback { @apply mt-4 p-3 rounded-lg text-sm font-semibold; }
        .sim-feedback.correct { @apply bg-green-100 text-green-800; }
        .sim-feedback.incorrect { @apply bg-red-100 text-red-800; }
        .sim-control-button { @apply mt-4 px-5 py-2 rounded-lg font-semibold text-white transition-colors duration-200; }
        .modal { transition: opacity 0.3s ease, transform 0.3s ease; }
        .modal-content { transition: transform 0.3s ease; }
        .action-button { background-color: #3b82f6; color: white; padding: 0.75rem 1.5rem; border-radius: 0.5rem; font-weight: 600; text-align: center; transition: background-color 0.3s ease; display: inline-block; }
        .action-button:hover { background-color: #2563eb; }
    </style>
</head>
<body class="text-gray-800">

    <div class="container mx-auto p-4 md:p-8">
        <!-- Encabezado Principal -->
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-blue-600">Abordaje del Paciente Neurocrítico</h1>
            <p class="text-lg text-gray-600 mt-2">Guía Interactiva por Dr. Héctor Castro</p>
        </header>

        <!-- Contenido del Módulo 1 -->
        <main>
            <div id="modulo1">
                <div class="info-card">
                    <h2 class="text-2xl font-bold text-blue-700 mb-4">Módulo 1: Valoración Inicial y Fisiopatología</h2>
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <div class="lg:col-span-2 space-y-6">
                            
                            <h3 class="font-bold text-xl text-gray-800 border-b pb-2">Definición y Principales Etiologías</h3>
                            <p>El paciente neurocrítico es aquel con una lesión aguda del sistema nervioso central que amenaza su vida o función neurológica. El objetivo del manejo es prevenir el <strong>daño secundario</strong>, ya que la lesión primaria es irreversible.</p>
                            <ul class="list-disc list-inside space-y-2 pl-4">
                                <li><strong>Traumatismo Craneoencefálico (TEC):</strong> Lesión física directa al cerebro.</li>
                                <li><strong>Evento Vascular Cerebral (EVC):</strong> Isquémico o hemorrágico, interrumpe el flujo sanguíneo.</li>
                                <li><strong>Hemorragia Subaracnoidea (HSA):</strong> Sangrado en el espacio que rodea el cerebro, usualmente por ruptura de un aneurisma.</li>
                                <li><strong>Encefalopatías:</strong> Disfunción cerebral difusa por causas metabólicas, tóxicas o anóxicas.</li>
                            </ul>

                            <h3 class="font-bold text-xl text-gray-800 border-b pb-2 mt-6">Fisiopatología de la Hipertensión Intracraneal (HIC)</h3>
                            <p>Basada en la <strong>Doctrina de Monro-Kellie</strong>, el cráneo es una bóveda rígida con un volumen fijo (parénquima 80%, sangre 10%, LCR 10%). Un aumento en uno de los componentes (ej. un hematoma) debe ser compensado por la disminución de otro. Cuando este mecanismo de compensación falla, la <strong>Presión Intracraneal (PIC)</strong> aumenta peligrosamente.</p>
                            
                            <div class="infographic my-6">
                                <h3 class="font-bold text-xl mb-4 text-center">Simulador Interactivo: Monro-Kellie y Curva P/V</h3>
                                <div id="monro-kellie-container" class="monro-kellie-container">
                                    <div class="chart-area">
                                        <div class="skull-box">
                                            <div id="bar-brain" class="volume-bar bg-gray-600" style="height: 80%;"></div>
                                            <div id="bar-blood" class="volume-bar bg-red-600" style="height: 10%;"></div>
                                            <div id="bar-csf" class="volume-bar bg-blue-500" style="height: 10%;"></div>
                                            <div id="bar-mass" class="volume-bar bg-purple-600" style="height: 0%;"></div>
                                        </div>
                                        <div class="flex flex-col items-center">
                                            <div class="pic-gauge-container"><div id="pic-gauge-level" class="pic-gauge-level"></div></div>
                                            <span id="pic-status-text" class="mt-2 text-green-600">PIC NORMAL</span>
                                        </div>
                                    </div>
                                    <div class="flex justify-around w-full max-w-lg mt-3 text-xs md:text-sm font-semibold">
                                        <div class="text-center w-1/4">Parénquima<br><span id="label-brain">80%</span></div>
                                        <div class="text-center w-1/4">Sangre<br><span id="label-blood">10%</span></div>
                                        <div class="text-center w-1/4">LCR<br><span id="label-csf">10%</span></div>
                                        <div class="text-center w-1/4">Lesión<br><span id="label-mass">0%</span></div>
                                    </div>
                                    <div class="pressure-volume-chart">
                                        <h4 class="text-center font-semibold text-gray-700 mb-2">Curva de Presión-Volumen Cerebral</h4>
                                        <svg id="pv-chart" viewBox="0 0 300 200">
                                            <line x1="20" y1="10" x2="20" y2="180" stroke="#9ca3af" stroke-width="1"/><line x1="20" y1="180" x2="280" y2="180" stroke="#9ca3af" stroke-width="1"/><text x="5" y="15" font-size="8" fill="#6b7280" style="writing-mode: vertical-rl; text-orientation: mixed;">PIC</text><text x="270" y="195" font-size="8" fill="#6b7280">Volumen</text>
                                            <rect x="20" y="10" width="133" height="170" fill="#22c55e" fill-opacity="0.1" /><rect x="153" y="10" width="127" height="170" fill="#ef4444" fill-opacity="0.1" /><text x="65" y="175" font-size="8" fill="#15803d">Compensación</text><text x="185" y="175" font-size="8" fill="#b91c1c">Descompensación</text>
                                            <path id="pv-curve-path" d="M 20,170 C 100,170 120,165 153,100 S 200,10 280,10" stroke="#3b82f6" stroke-width="2.5" fill="none"/>
                                            <circle id="pv-curve-indicator" class="pv-curve-indicator" cx="20" cy="170" r="5" fill="#1d4ed8" stroke="white" stroke-width="1.5"/>
                                        </svg>
                                    </div>
                                    <div class="w-full max-w-md mt-4">
                                        <label for="mass-slider" class="block text-center font-semibold mb-1">Aumentar tamaño de la lesión</label>
                                        <input id="mass-slider" type="range" min="0" max="30" value="0" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                                    </div>
                                </div>
                            </div>

                            <h3 class="font-bold text-xl text-gray-800 border-b pb-2 mt-6">Evaluación Neurológica Sistemática</h3>
                            <p>La evaluación neurológica rápida y estandarizada es fundamental para establecer una línea de base y detectar cambios.</p>
                            <ul class="list-disc list-inside space-y-2 pl-4">
                                <li><strong>Escala de Coma de Glasgow (GCS):</strong> Evalúa el nivel de conciencia (ocular, verbal, motora). Un GCS ≤ 8 define un TCE severo.</li>
                                <li><strong>Evaluación Pupilar:</strong> Se valora tamaño, simetría y reactividad a la luz. Cambios como la anisocoria pueden indicar herniación.</li>
                                <li><strong>Escala NIHSS (National Institutes of Health Stroke Scale):</strong> Cuantifica el déficit neurológico en pacientes con EVC.</li>
                            </ul>
                            <div class="mt-4">
                                <a href="calculadora-nihss.html" class="action-button">Evaluación Ictus NIHSS</a>
                            </div>

                            <h3 class="font-bold text-xl text-gray-800 border-b pb-2 mt-6">ABCD Primario y Secundario con Enfoque Neurológico</h3>
                            <p>La evaluación inicial sigue el principio de ABCD con consideraciones neurológicas clave:</p>
                             <ul class="list-disc list-inside space-y-2 pl-4">
                                <li><strong>A (Airway):</strong> Asegurar vía aérea protegiendo la columna cervical.</li>
                                <li><strong>B (Breathing):</strong> Evitar hipoxia e hipercapnia.</li>
                                <li><strong>C (Circulation):</strong> Evitar la hipotensión a toda costa.</li>
                                <li><strong>D (Disability):</strong> Evaluación neurológica rápida (GCS, pupilas).</li>
                            </ul>

                            <h3 class="font-bold text-xl mt-6">Simulador Clínico: Día 1</h3>
                            <div id="sim1-container" class="bg-gray-800 text-white p-6 rounded-lg">
                                <p class="mb-4 font-semibold">Caso: Paciente de 25 años, accidente de motocicleta. Inconsciente.</p>
                                <div id="sim1-step1">
                                   <p class="mb-4">Paso 1: ¿Cuál es su acción inicial para calcular la Escala de Coma de Glasgow (GCS)?</p>
                                    <div class="space-y-2 sim-options">
                                        <button class="sim-button" onclick="sim1_feedback(this, true)">Evaluar la respuesta ocular, verbal y motora.</button>
                                        <button class="sim-button" onclick="sim1_feedback(this, false)">Tomar la presión arterial.</button>
                                        <button class="sim-button" onclick="sim1_feedback(this, false)">Administrar oxígeno.</button>
                                    </div>
                                    <div id="sim1-feedback1" class="sim-feedback hidden"></div>
                                    <button id="sim1-next1" class="sim-control-button bg-blue-500 hover:bg-blue-600 hidden" onclick="sim1_next(2)">Siguiente Paso →</button>
                                </div>
                                <div id="sim1-step2" class="hidden">
                                    <p class="mb-4">Paso 2: El paciente no abre los ojos (1), emite sonidos incomprensibles (2) y presenta flexión anormal al estímulo doloroso (3). Calcule la GCS.</p>
                                    <div class="space-y-2 sim-options">
                                        <button class="sim-button" onclick="sim1_final(this, true)">GCS: 6. TCE Severo.</button>
                                        <button class="sim-button" onclick="sim1_final(this, false)">GCS: 8. TCE Moderado.</button>
                                        <button class="sim-button" onclick="sim1_final(this, false)">GCS: 5. TCE Severo.</button>
                                    </div>
                                    <div id="sim1-feedback2" class="sim-feedback hidden"></div>
                                </div>
                                <button id="sim1-restart" class="sim-control-button bg-gray-500 hover:bg-gray-600 hidden" onclick="restartSim(1)">Reiniciar Caso</button>
                            </div>
                        </div>
                        <div class="lg:col-span-1 space-y-6">
                            <div class="bg-white p-6 rounded-lg shadow-md">
                                <h3 class="text-xl font-bold text-gray-800 mb-4">Recursos del Día 1</h3>
                                <div class="space-y-3">
                                    <button onclick="openModal('modal-gcs')" class="w-full bg-blue-50 hover:bg-blue-100 text-blue-800 font-semibold py-3 px-4 rounded-lg text-left transition-colors duration-200 flex items-center"><span class="text-xl mr-3">📋</span> Guía Rápida: Escala de Glasgow</button>
                                    <button onclick="openModal('modal-pupilas')" class="w-full bg-blue-50 hover:bg-blue-100 text-blue-800 font-semibold py-3 px-4 rounded-lg text-left transition-colors duration-200 flex items-center"><span class="text-xl mr-3">👁️</span> Guía Rápida: Valoración Pupilar</button>
                                    <a href="https://www.ninds.nih.gov/health-information/professional-resources/nih-stroke-scale" target="_blank" class="w-full bg-blue-50 hover:bg-blue-100 text-blue-800 font-semibold py-3 px-4 rounded-lg text-left transition-colors duration-200 flex items-center"><span class="text-xl mr-3">📄</span> Descargable: Escala NIHSS</a>
                                </div>
                            </div>
                            <div class="bg-white p-6 rounded-lg shadow-md">
                                <button onclick="openModal('modal-ojo-clinico')" class="w-full bg-yellow-100 hover:bg-yellow-200 text-yellow-800 font-bold py-4 px-4 rounded-lg text-center transition-colors duration-200 flex items-center justify-center"><span class="text-2xl mr-3">🚨</span> ¡OJO CLÍNICO!</button>
                            </div>
                        </div>
                    </div>
                </div>
                <footer class="footer-note">©️ 2025 Dr. Héctor Castro. Todos los derechos reservados. Esta información no sustituye las guías de manejo de cada unidad hospitalaria tampoco el criterio o juicio clínico de cada profesional de la salud. La información aquí presentada es contenido educativo destinado para profesionales sanitarios.</footer>
            </div>
        </main>
    </div>

    <!-- Modales -->
    <div id="modal-gcs" class="modal fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50 opacity-0 pointer-events-none"><div class="modal-content bg-white w-full max-w-2xl rounded-lg shadow-2xl p-6 transform scale-95"><div class="flex justify-between items-center border-b pb-3 mb-4"><h3 class="text-xl font-bold text-gray-800">📋 Guía Rápida: Escala de Coma de Glasgow (GCS)</h3><button onclick="closeModal('modal-gcs')" class="text-gray-500 hover:text-gray-800 text-3xl">&times;</button></div><img src="https://placehold.co/600x400/ffffff/000000?text=Tabla+Visual+de+la+Escala+de+Glasgow" alt="Tabla de GCS" class="w-full rounded-md"></div></div>
    <div id="modal-pupilas" class="modal fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50 opacity-0 pointer-events-none"><div class="modal-content bg-white w-full max-w-2xl rounded-lg shadow-2xl p-6 transform scale-95"><div class="flex justify-between items-center border-b pb-3 mb-4"><h3 class="text-xl font-bold text-gray-800">👁️ Guía Rápida: Valoración Pupilar</h3><button onclick="closeModal('modal-pupilas')" class="text-gray-500 hover:text-gray-800 text-3xl">&times;</button></div><img src="https://placehold.co/600x300/ffffff/000000?text=Imágenes+de+Pupilas+Normales+y+Patológicas" alt="Infografía de valoración pupilar" class="w-full rounded-md"></div></div>
    <div id="modal-ojo-clinico" class="modal fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50 opacity-0 pointer-events-none"><div class="modal-content bg-yellow-50 border-4 border-yellow-300 w-full max-w-lg rounded-lg shadow-2xl p-8 text-center transform scale-95"><button onclick="closeModal('modal-ojo-clinico')" class="absolute top-2 right-4 text-yellow-700 hover:text-yellow-900 text-3xl">&times;</button><span class="text-5xl mb-4 block">🚨</span><h3 class="text-2xl font-bold text-yellow-900 mb-2">¡Alerta: Signos de Herniación!</h3><p class="text-yellow-800 mb-4">La <strong>Tríada de Cushing</strong> es un signo tardío y ominoso de HIC severa. ¡Actúa rápido!</p><div class="text-left space-y-2 font-semibold text-gray-700"><p>1. <strong class="text-red-600">Hipertensión Arterial</strong></p><p>2. <strong class="text-blue-600">Bradicardia</strong></p><p>3. <strong class="text-green-600">Alteración Respiratoria</strong></p></div></div></div>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => { setupMonroKellieChart(); });
        function setupMonroKellieChart() {
            const slider = document.getElementById('mass-slider'); if (!slider) return;
            const container = document.getElementById('monro-kellie-container');
            const barBrain = document.getElementById('bar-brain'), barBlood = document.getElementById('bar-blood'), barCsf = document.getElementById('bar-csf'), barMass = document.getElementById('bar-mass');
            const labelBrain = document.getElementById('label-brain'), labelBlood = document.getElementById('label-blood'), labelCsf = document.getElementById('label-csf'), labelMass = document.getElementById('label-mass');
            const gaugeLevel = document.getElementById('pic-gauge-level'), statusText = document.getElementById('pic-status-text');
            const pvIndicator = document.getElementById('pv-curve-indicator'), pvCurvePath = document.getElementById('pv-curve-path'), pathLength = pvCurvePath.getTotalLength();
            const initialBrain = 80, initialBlood = 10, initialCsf = 10, compensationLimit = initialBlood + initialCsf;
            slider.addEventListener('input', () => {
                const massValue = parseInt(slider.value); let newCsf = initialCsf, newBlood = initialBlood;
                if (massValue > 0) { const csfCompensation = Math.min(initialCsf, massValue); newCsf -= csfCompensation; const remainingMass = massValue - csfCompensation; if (remainingMass > 0) { newBlood -= Math.min(initialBlood, remainingMass); } }
                const totalVolume = initialBrain + newBlood + newCsf + massValue; const pressureIncrease = Math.max(0, totalVolume - 100);
                barBrain.style.height = `${initialBrain}%`; barBlood.style.height = `${newBlood}%`; barCsf.style.height = `${newCsf}%`; barMass.style.height = `${massValue}%`;
                labelBrain.textContent = `${initialBrain}%`; labelBlood.textContent = `${newBlood.toFixed(0)}%`; labelCsf.textContent = `${newCsf.toFixed(0)}%`; labelMass.textContent = `${massValue}%`;
                const gaugeHeight = Math.min(100, (pressureIncrease / (slider.max - compensationLimit)) * 100 * 2.5); gaugeLevel.style.height = `${gaugeHeight}%`;
                container.classList.remove('critical-shake');
                if (pressureIncrease > 5) { statusText.textContent = 'PIC CRÍTICA'; statusText.style.color = '#ef4444'; gaugeLevel.style.backgroundColor = '#ef4444'; container.classList.add('critical-shake'); }
                else if (pressureIncrease > 0) { statusText.textContent = 'PIC ELEVADA'; statusText.style.color = '#f59e0b'; gaugeLevel.style.backgroundColor = '#f59e0b'; }
                else { statusText.textContent = 'PIC NORMAL'; statusText.style.color = '#22c55e'; gaugeLevel.style.backgroundColor = '#22c55e'; }
                let progress = (massValue / slider.max); let pointOnPath = pvCurvePath.getPointAtLength(progress * pathLength);
                pvIndicator.setAttribute('cx', pointOnPath.x); pvIndicator.setAttribute('cy', pointOnPath.y);
            });
        }
        function openModal(modalId) { const m = document.getElementById(modalId); if (!m) return; m.classList.remove('opacity-0', 'pointer-events-none'); m.querySelector('.modal-content').classList.remove('scale-95'); }
        function closeModal(modalId) { const m = document.getElementById(modalId); if (!m) return; m.classList.add('opacity-0'); m.querySelector('.modal-content').classList.add('scale-95'); setTimeout(() => m.classList.add('pointer-events-none'), 300); }
        document.querySelectorAll('.modal').forEach(m => m.addEventListener('click', (e) => { if (e.target === m) closeModal(m.id); }));
        const simFeedbacks = {
            sim1_step1_correct: "¡Correcto! La valoración neurológica sistemática es el primer paso.", sim1_step1_incorrect: "Incorrecto. La GCS requiere una evaluación neurológica directa.",
            sim1_step2_correct: "¡Excelente! Un GCS de 6 (E1V2M3) indica un TCE severo.", sim1_step2_incorrect: "Cálculo incorrecto. Revisa los componentes de la GCS."
        };
        function disableOptions(stepElement) { stepElement.querySelectorAll('.sim-button').forEach(button => button.disabled = true); }
        function sim1_feedback(button, isCorrect) {
            const stepElement = document.getElementById('sim1-step1'), feedbackDiv = document.getElementById('sim1-feedback1');
            disableOptions(stepElement); button.classList.add(isCorrect ? 'sim-button-correct' : 'sim-button-incorrect');
            feedbackDiv.textContent = isCorrect ? simFeedbacks.sim1_step1_correct : simFeedbacks.sim1_step1_incorrect;
            feedbackDiv.className = isCorrect ? 'sim-feedback correct' : 'sim-feedback incorrect';
            if (isCorrect) { document.getElementById('sim1-next1').classList.remove('hidden'); } else { document.getElementById('sim1-restart').classList.remove('hidden'); }
        }
        function sim1_next(step) { document.getElementById('sim1-step1').classList.add('hidden'); document.getElementById(`sim1-step${step}`).classList.remove('hidden'); }
        function sim1_final(button, isCorrect) {
            const stepElement = document.getElementById('sim1-step2'), feedbackDiv = document.getElementById('sim1-feedback2');
            disableOptions(stepElement); button.classList.add(isCorrect ? 'sim-button-correct' : 'sim-button-incorrect');
            feedbackDiv.textContent = isCorrect ? simFeedbacks.sim1_step2_correct : simFeedbacks.sim1_step2_incorrect;
            feedbackDiv.className = isCorrect ? 'sim-feedback correct' : 'sim-feedback incorrect';
            document.getElementById('sim1-restart').classList.remove('hidden');
        }
        function restartSim(simNum) {
            const container = document.getElementById(`sim${simNum}-container`);
            container.querySelectorAll('div[id^="sim' + simNum + '-step"]').forEach(el => el.classList.add('hidden'));
            container.querySelector('#sim' + simNum + '-step1').classList.remove('hidden');
            container.querySelectorAll('.sim-feedback').forEach(el => el.classList.add('hidden'));
            container.querySelectorAll('.sim-control-button').forEach(el => el.classList.add('hidden'));
            container.querySelectorAll('.sim-button').forEach(button => { button.disabled = false; button.classList.remove('sim-button-correct', 'sim-button-incorrect'); });
        }
    </script>
</body>
</html>

